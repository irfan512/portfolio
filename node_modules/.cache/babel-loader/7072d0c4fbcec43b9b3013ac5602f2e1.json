{"ast":null,"code":"import _regeneratorRuntime from \"/Users/irfanhaider/Flutter Projects/portfolio/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _objectSpread from \"/Users/irfanhaider/Flutter Projects/portfolio/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _asyncToGenerator from \"/Users/irfanhaider/Flutter Projects/portfolio/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { store } from '../../store/store';\nimport { sendPost } from '../../api/sendPost';\nimport { buildOptions } from '../../utils/buildOptions/buildOptions';\nimport { validateForm } from '../../utils/validateForm/validateForm';\nimport { validateParams } from '../../utils/validateParams/validateParams';\nimport { isHeadless } from '../../utils/isHeadless/isHeadless';\nimport { headlessError } from '../../errors/headlessError/headlessError';\nimport { isBlockedValueInParams } from '../../utils/isBlockedValueInParams/isBlockedValueInParams';\nimport { blockedEmailError } from '../../errors/blockedEmailError/blockedEmailError';\nimport { isLimitRateHit } from '../../utils/isLimitRateHit/isLimitRateHit';\nimport { limitRateError } from '../../errors/limitRateError/limitRateError';\n\nvar findHTMLForm = function findHTMLForm(form) {\n  return typeof form === 'string' ? document.querySelector(form) : form;\n};\n/**\n * Send a form the specific EmailJS service\n * @param {string} serviceID - the EmailJS service ID\n * @param {string} templateID - the EmailJS template ID\n * @param {string | HTMLFormElement} form - the form element or selector\n * @param {object} options - the EmailJS SDK config options\n * @returns {Promise<EmailJSResponseStatus>}\n */\n\n\nexport var sendForm = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(serviceID, templateID, form, options) {\n    var opts, publicKey, blockHeadless, storageProvider, blockList, limitRate, currentForm, formData;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            opts = buildOptions(options);\n            publicKey = opts.publicKey || store.publicKey;\n            blockHeadless = opts.blockHeadless || store.blockHeadless;\n            storageProvider = store.storageProvider || opts.storageProvider;\n            blockList = _objectSpread(_objectSpread({}, store.blockList), opts.blockList);\n            limitRate = _objectSpread(_objectSpread({}, store.limitRate), opts.limitRate);\n\n            if (!(blockHeadless && isHeadless(navigator))) {\n              _context.next = 8;\n              break;\n            }\n\n            return _context.abrupt(\"return\", Promise.reject(headlessError()));\n\n          case 8:\n            currentForm = findHTMLForm(form);\n            validateParams(publicKey, serviceID, templateID);\n            validateForm(currentForm);\n            formData = new FormData(currentForm);\n\n            if (!isBlockedValueInParams(blockList, formData)) {\n              _context.next = 14;\n              break;\n            }\n\n            return _context.abrupt(\"return\", Promise.reject(blockedEmailError()));\n\n          case 14:\n            _context.next = 16;\n            return isLimitRateHit(location.pathname, limitRate, storageProvider);\n\n          case 16:\n            if (!_context.sent) {\n              _context.next = 18;\n              break;\n            }\n\n            return _context.abrupt(\"return\", Promise.reject(limitRateError()));\n\n          case 18:\n            formData.append('lib_version', '4.4.1');\n            formData.append('service_id', serviceID);\n            formData.append('template_id', templateID);\n            formData.append('user_id', publicKey);\n            return _context.abrupt(\"return\", sendPost('/api/v1.0/email/send-form', formData));\n\n          case 23:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function sendForm(_x, _x2, _x3, _x4) {\n    return _ref.apply(this, arguments);\n  };\n}();","map":{"version":3,"names":["store","sendPost","buildOptions","validateForm","validateParams","isHeadless","headlessError","isBlockedValueInParams","blockedEmailError","isLimitRateHit","limitRateError","findHTMLForm","form","document","querySelector","sendForm","serviceID","templateID","options","opts","publicKey","blockHeadless","storageProvider","blockList","limitRate","navigator","Promise","reject","currentForm","formData","FormData","location","pathname","append"],"sources":["/Users/irfanhaider/Flutter Projects/portfolio/node_modules/@emailjs/browser/es/methods/sendForm/sendForm.js"],"sourcesContent":["import { store } from '../../store/store';\nimport { sendPost } from '../../api/sendPost';\nimport { buildOptions } from '../../utils/buildOptions/buildOptions';\nimport { validateForm } from '../../utils/validateForm/validateForm';\nimport { validateParams } from '../../utils/validateParams/validateParams';\nimport { isHeadless } from '../../utils/isHeadless/isHeadless';\nimport { headlessError } from '../../errors/headlessError/headlessError';\nimport { isBlockedValueInParams } from '../../utils/isBlockedValueInParams/isBlockedValueInParams';\nimport { blockedEmailError } from '../../errors/blockedEmailError/blockedEmailError';\nimport { isLimitRateHit } from '../../utils/isLimitRateHit/isLimitRateHit';\nimport { limitRateError } from '../../errors/limitRateError/limitRateError';\nconst findHTMLForm = (form) => {\n    return typeof form === 'string' ? document.querySelector(form) : form;\n};\n/**\n * Send a form the specific EmailJS service\n * @param {string} serviceID - the EmailJS service ID\n * @param {string} templateID - the EmailJS template ID\n * @param {string | HTMLFormElement} form - the form element or selector\n * @param {object} options - the EmailJS SDK config options\n * @returns {Promise<EmailJSResponseStatus>}\n */\nexport const sendForm = async (serviceID, templateID, form, options) => {\n    const opts = buildOptions(options);\n    const publicKey = opts.publicKey || store.publicKey;\n    const blockHeadless = opts.blockHeadless || store.blockHeadless;\n    const storageProvider = store.storageProvider || opts.storageProvider;\n    const blockList = { ...store.blockList, ...opts.blockList };\n    const limitRate = { ...store.limitRate, ...opts.limitRate };\n    if (blockHeadless && isHeadless(navigator)) {\n        return Promise.reject(headlessError());\n    }\n    const currentForm = findHTMLForm(form);\n    validateParams(publicKey, serviceID, templateID);\n    validateForm(currentForm);\n    const formData = new FormData(currentForm);\n    if (isBlockedValueInParams(blockList, formData)) {\n        return Promise.reject(blockedEmailError());\n    }\n    if (await isLimitRateHit(location.pathname, limitRate, storageProvider)) {\n        return Promise.reject(limitRateError());\n    }\n    formData.append('lib_version', '4.4.1');\n    formData.append('service_id', serviceID);\n    formData.append('template_id', templateID);\n    formData.append('user_id', publicKey);\n    return sendPost('/api/v1.0/email/send-form', formData);\n};\n"],"mappings":";;;AAAA,SAASA,KAAT,QAAsB,mBAAtB;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,SAASC,YAAT,QAA6B,uCAA7B;AACA,SAASC,YAAT,QAA6B,uCAA7B;AACA,SAASC,cAAT,QAA+B,2CAA/B;AACA,SAASC,UAAT,QAA2B,mCAA3B;AACA,SAASC,aAAT,QAA8B,0CAA9B;AACA,SAASC,sBAAT,QAAuC,2DAAvC;AACA,SAASC,iBAAT,QAAkC,kDAAlC;AACA,SAASC,cAAT,QAA+B,2CAA/B;AACA,SAASC,cAAT,QAA+B,4CAA/B;;AACA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACC,IAAD,EAAU;EAC3B,OAAO,OAAOA,IAAP,KAAgB,QAAhB,GAA2BC,QAAQ,CAACC,aAAT,CAAuBF,IAAvB,CAA3B,GAA0DA,IAAjE;AACH,CAFD;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA,OAAO,IAAMG,QAAQ;EAAA,sEAAG,iBAAOC,SAAP,EAAkBC,UAAlB,EAA8BL,IAA9B,EAAoCM,OAApC;IAAA;IAAA;MAAA;QAAA;UAAA;YACdC,IADc,GACPjB,YAAY,CAACgB,OAAD,CADL;YAEdE,SAFc,GAEFD,IAAI,CAACC,SAAL,IAAkBpB,KAAK,CAACoB,SAFtB;YAGdC,aAHc,GAGEF,IAAI,CAACE,aAAL,IAAsBrB,KAAK,CAACqB,aAH9B;YAIdC,eAJc,GAIItB,KAAK,CAACsB,eAAN,IAAyBH,IAAI,CAACG,eAJlC;YAKdC,SALc,mCAKGvB,KAAK,CAACuB,SALT,GAKuBJ,IAAI,CAACI,SAL5B;YAMdC,SANc,mCAMGxB,KAAK,CAACwB,SANT,GAMuBL,IAAI,CAACK,SAN5B;;YAAA,MAOhBH,aAAa,IAAIhB,UAAU,CAACoB,SAAD,CAPX;cAAA;cAAA;YAAA;;YAAA,iCAQTC,OAAO,CAACC,MAAR,CAAerB,aAAa,EAA5B,CARS;;UAAA;YAUdsB,WAVc,GAUAjB,YAAY,CAACC,IAAD,CAVZ;YAWpBR,cAAc,CAACgB,SAAD,EAAYJ,SAAZ,EAAuBC,UAAvB,CAAd;YACAd,YAAY,CAACyB,WAAD,CAAZ;YACMC,QAbc,GAaH,IAAIC,QAAJ,CAAaF,WAAb,CAbG;;YAAA,KAchBrB,sBAAsB,CAACgB,SAAD,EAAYM,QAAZ,CAdN;cAAA;cAAA;YAAA;;YAAA,iCAeTH,OAAO,CAACC,MAAR,CAAenB,iBAAiB,EAAhC,CAfS;;UAAA;YAAA;YAAA,OAiBVC,cAAc,CAACsB,QAAQ,CAACC,QAAV,EAAoBR,SAApB,EAA+BF,eAA/B,CAjBJ;;UAAA;YAAA;cAAA;cAAA;YAAA;;YAAA,iCAkBTI,OAAO,CAACC,MAAR,CAAejB,cAAc,EAA7B,CAlBS;;UAAA;YAoBpBmB,QAAQ,CAACI,MAAT,CAAgB,aAAhB,EAA+B,OAA/B;YACAJ,QAAQ,CAACI,MAAT,CAAgB,YAAhB,EAA8BjB,SAA9B;YACAa,QAAQ,CAACI,MAAT,CAAgB,aAAhB,EAA+BhB,UAA/B;YACAY,QAAQ,CAACI,MAAT,CAAgB,SAAhB,EAA2Bb,SAA3B;YAvBoB,iCAwBbnB,QAAQ,CAAC,2BAAD,EAA8B4B,QAA9B,CAxBK;;UAAA;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAH;;EAAA,gBAARd,QAAQ;IAAA;EAAA;AAAA,GAAd"},"metadata":{},"sourceType":"module"}